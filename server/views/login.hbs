<div class="auth-page">
    <div class="auth-card card">
        <h1>Login</h1>

        <form id="login">
            <input name="email" type="email" placeholder="Email" required />
            <input name="password" type="password" placeholder="Password" required />
            <button type="submit">Log in</button>
        </form>

        <p id="msg" class="muted"></p>
        <p class="muted">Don't have an account? <a href="/register">Register</a></p>
    </div>
</div>

<script>
  document.getElementById("login").addEventListener("submit", async (e) => {
    e.preventDefault();

    const form = new FormData(e.target);
    const payload = Object.fromEntries(form.entries());

    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const data = await res.json();
    document.getElementById("msg").textContent =
      res.ok ? "Logged in! Redirecting..." : (data.error || "Error");

    if (res.ok) window.location = "/";
  });
</script>
